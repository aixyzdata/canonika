<template>
  <div class="skipper-harbor-view">
    <div class="view-header">
      <div class="view-title">
        <i class="fas fa-ship"></i>
        <div class="title-content">
          <h1>Skipper - Orquestrador de Navega√ß√£o</h1>
          <p>Pesquisa e extra√ß√£o inteligente de dados de produtos</p>
        </div>
      </div>
      <div class="view-status">
        <div class="status-indicator online"></div>
        <span>ONLINE</span>
      </div>
      <div class="view-actions">
        <button @click="refreshData" class="action-btn">
          <i class="fas fa-sync-alt"></i>
          Atualizar
        </button>
        <button @click="openModule" class="action-btn primary">
          <i class="fas fa-external-link-alt"></i>
          Acessar
        </button>
      </div>
    </div>

    <div class="dashboard-cards">
      <div class="card">
        <div class="card-header">
          <i class="fas fa-search"></i>
          <h3>Pesquisas Realizadas</h3>
        </div>
        <div class="card-content">
          <div class="metric">
            <span class="number">{{ stats.searches }}</span>
            <span class="label">Hoje</span>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <i class="fas fa-database"></i>
          <h3>Produtos Extra√≠dos</h3>
        </div>
        <div class="card-content">
          <div class="metric">
            <span class="number">{{ stats.products }}</span>
            <span class="label">Total</span>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <i class="fas fa-globe"></i>
          <h3>Fontes Ativas</h3>
        </div>
        <div class="card-content">
          <div class="metric">
            <span class="number">{{ stats.sources }}</span>
            <span class="label">Conectadas</span>
          </div>
        </div>
      </div>
    </div>

    <div class="actions-panel">
      <h3>Ferramentas Dispon√≠veis</h3>
      <div class="action-buttons">
        <button @click="startSimulation" class="action-btn primary">
          <i class="fas fa-play"></i>
          Iniciar Simula√ß√£o
        </button>
        <button @click="manageSources" class="action-btn">
          <i class="fas fa-cog"></i>
          Configurar Fontes
        </button>
        <button @click="viewLogs" class="action-btn">
          <i class="fas fa-file-alt"></i>
          Ver Logs
        </button>
        <button @click="exportResults" class="action-btn">
          <i class="fas fa-download"></i>
          Exportar Resultados
        </button>
      </div>
    </div>

    <div class="recent-extractions">
      <h3>Extra√ß√µes Recentes</h3>
      <div class="extraction-list">
        <div v-for="extraction in recentExtractions" :key="extraction.id" class="extraction-item">
          <div class="extraction-icon">
            <i :class="extraction.icon"></i>
          </div>
          <div class="extraction-content">
            <span class="extraction-text">{{ extraction.text }}</span>
            <span class="extraction-time">{{ extraction.time }}</span>
          </div>
          <div class="extraction-status">
            <span :class="['status', extraction.status]">{{ extraction.statusText }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'SkipperHarborView',
  data() {
    return {
      stats: {
        searches: 47,
        products: 2843,
        sources: 12
      },
      recentExtractions: [
        {
          id: 1,
          icon: 'fas fa-shopping-cart',
          text: 'Extra√ß√£o de produtos eletr√¥nicos - Amazon',
          time: '5 minutos atr√°s',
          status: 'success',
          statusText: 'Conclu√≠do'
        },
        {
          id: 2,
          icon: 'fas fa-search',
          text: 'Pesquisa por t√™nis esportivos - MercadoLivre',
          time: '12 minutos atr√°s',
          status: 'processing',
          statusText: 'Processando'
        },
        {
          id: 3,
          icon: 'fas fa-database',
          text: 'Extra√ß√£o de livros - Saraiva',
          time: '1 hora atr√°s',
          status: 'success',
          statusText: 'Conclu√≠do'
        },
        {
          id: 4,
          icon: 'fas fa-exclamation-triangle',
          text: 'Erro na extra√ß√£o - Site indispon√≠vel',
          time: '2 horas atr√°s',
          status: 'error',
          statusText: 'Erro'
        }
      ]
    }
  },
  methods: {
    refreshData() {
      // Simula atualiza√ß√£o dos dados
      console.log('Atualizando dados do Skipper...');
      // Aqui poderia fazer uma chamada real para a API para atualizar os stats
    },
    openModule() {
      window.open('http://localhost:7722/web/', '_blank');
    },
    startSimulation() {
      console.log('üöÄ Iniciando simula√ß√£o - Redirecionando para:', 'http://localhost:7722/web/#/simulation');
      window.open('http://localhost:7722/web/#/simulation', '_blank');
    },
    manageSources() {
      window.open('http://localhost:7722/web/#/sources', '_blank');
    },
    viewLogs() {
      // Como n√£o h√° uma view espec√≠fica de logs ainda, vamos para simula√ß√£o
      window.open('http://localhost:7722/web/#/simulation', '_blank');
    },
    exportResults() {
      alert('Funcionalidade de exporta√ß√£o em desenvolvimento...');
    }
  }
}
</script>

